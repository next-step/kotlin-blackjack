# kotlin-blackjack

## 프로그래밍 요구 사항
- 모든 기능을 TDD로 구현해 단위 테스트가 존재해야 한다. 단, UI(System.out, System.in) 로직은 제외
- indent(인덴트, 들여쓰기) depth를 2를 넘지 않도록 구현한다. 1까지만 허용한다.
- 모든 엔티티를 작게 유지한다.
- 함수(또는 메서드)의 길이가 15라인을 넘어가지 않도록 구현한다.
- 기능을 구현하기 전에 README.md 파일에 구현할 기능 목록을 정리해 추가한다.
- git의 commit 단위는 앞 단계에서 README.md 파일에 정리한 기능 목록 단위로 추가한다.

### 기능 목록 
InputView : 게임에 필요한 입력값을 입력 받는다
- 게임에 참여할 사람의 이름을 입력 받는다 
  - 쉼표 기준으로 분리한다 
  - 2명의 이름을 입력 받는다
  - 참가자의 이름은 공백일 수 없다.
- [x] 플레이어는 게임을 시작할 때 베팅 금액을 정해야 한다

InputProcessor : 입력 금액을 검증하고 도메인 레벨로 변환한다
- 게임에 참여할 사람의 이름을 처리한다
  - 게임 참여자는 2명이여야 한다
  - 게임 참여자의 이름은 서로 달라야 한다
  - 게임 참여자 이름은 공백일 수 없다.
- [x] 베팅 금액을 처리한다
  - 베팅 금액은 0보다 커야 한다

BlackJackGame : 게임을 진행한다
- distributor 가 dealEnd 가 될 때까지 카드 배분을 진행한다
- 각 카드 배분의 결과를 result 처리기에 넘긴다
- 초기 카드 배분자는 DealIntialCards()이다
- 카드 배분 횟수를 초과하면 종료시킨다
  - 한 사람이 최대 가질 수 있는 카드 수 11장  ( Ace(1) * 4 + 2 * 4 + 3 * 3) : 배분 9번 진행
  - 한 게임당 가질 수 있는 최대 카드 배분 횟수 : 초키 카드 배분 + 9번 진행 * 2 + 딜러 카드 배분 = 20

GameTable
- 딜러와 플레이어를 갖고 상호간의 카드 이동을 담당한다
- 배팅 보드를 가지고 게임이 끝나면 게임 결과로 베팅 결과를 산출한다

Players
- 플레이어를 관리하고 어떤 플레이어의 턴인지 관리한다
  - 플레이어 이름으로 플레이어를 생성한다
  - PlayerNames : 플레이어 이름 리스트
    - [x] 각 플레이어는 다른 이름이어야 함

Dealer
- 카드 52장 (1덱)을 세팅한다
  - 스페이스, 하트, 다이아, 클로버 4개의 각 문양이 2~10, jack, queen, king, ace 13장으로 구성
- 자신의 카드 보유에 따라 hit or stand 를 반환한다
  - 처음 받은 2장의 카드의 합이 16이하이면 1장의 카드를 받고, 17이상이면 카드를 받지 않는다

Player 
- [x] 플레이어는 이름이 같으면 동일한 플레이어로 취급된다
- hitOrStand: 사용자의 의견에 따라 카드를 더 받을지(hit) 그만할지(stand)를 반환한다
  - 사용자가 hit 를 요청했더라도 카드 점수가 21점 이상이면 stand 를 반환한다 
- 딜러와의 점수를 비교해서 승패를 가를 수 있다
  - 버스트 : 딜러 점수와 상관 없이 패
  - 그 외 딜러보다 점수가 높으면 승, 같으면 무, 낮으면 패

BettingBoard : 베팅 보드 
- [x] 플레이어별 베팅 금액을 저장
- [x] 게임이 종료되면 플레이어별 승패 결과에 따라 각 플레이어가 받을 금액을 결정한다
  - 플레이어가 이겼을 때
    - 블랙잭으로 이겼을 때 : 베팅금액 회수 + 베팅금액 * 1.5
    - 일반 수로 이겼을 때 : 베팅금액 회수 + 베팅금액 * 1 
    - 무승부일 때 : 베팅금액 회수
    - 졌을 때: 베팅금액 뺏김 
  - PlayerBet 
    - 플레이어의 베팅 금액과 받은 금액으로 최종 수익을 계산한다

DealInitialCards : 처음 카드 배분
- 참가자와 딜러에게 각각 2장의 카드를 나눠 준다

DealToPlayer
- 참가자 중 1명에게 카드를 더 받을지 묻고, 결과에 따라 카드를 지급한다
  - 참가자가 hit 라면 카드 한 장을 더 지급한다
  - 참가자가 stand 라면 다른 참가자에게 턴이 넘어간다. 두번째 참가자라면 딜러에게 턴이 넘어간다
  - 참가자의 hit or stand 마다 배분 결과를 반환한다
  - 참가자가 stand 였을 때 점수가 21점 이상이라면 시스템으로 인한 stand로 판별한다

DealToDealer
- 딜러의 카드 상태에 따라 hit or stand 를 조회하고 결과에 따라 카드를 지급한다
- 딜러까지 카드 배분이 끝나면 카드 배분을 종료한다

ResultProcessor
- 발생한 Result 이벤트에 따라 해당 이벤트를 알맞은 ResultHandler 에 전달한다
- DealToPlayerResult 인 경우 시스템상의 stand 라면 뷰에 결과를 전달하지 않는다

ViewResultProcessor
- 딜러의 카드는 한 장만 출력한다
- 게임이 종료되면 (GameResult 인 경우) 딜러와 플레이어의 카드 점수를 출력한다
- 베팅 결과를 최종 수익을 출력한다

GameResult
- 게임 최종 결과는 21을 넘지 않으면서, 21에 가까운 방식으로 계산한다 
- 카드의 숫자 계산은 카드 숫자를 기본으로 하며, 예외로 Ace는 1 또는 11로 계산할 수 있으며, King, Queen, Jack은 각각 10으로 계산한다. 
